{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>My Web Page</title>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://uicdn.toast.com/tui.code-snippet/latest/tui-code-snippet.min.css">
    <script src="https://uicdn.toast.com/tui.code-snippet/latest/tui-code-snippet.min.js"></script>
    
    <!-- Calendar base -->
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css">
    <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
    
    <!-- Date/Time Picker -->
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css">
    <script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
    <script src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>

.custom-header {
  margin-bottom: 10px;
  padding: 10px;
  border-bottom: 1px solid #ddd;
}

.custom-header button {
  padding: 5px 10px;
  margin-right: 10px;
  background-color: rgb(255, 200, 168);
}

.custom-header button:hover {
    cursor: pointer;
  background-color: rgb(255, 168, 168);
}

.custom-header span {
  font-weight: bold;
  margin-right: 10px;
}
    </style>
  </head>
  <body>
    <div id="calendar-container">
        <div class="custom-header">
          <button onclick="movePrev()">Previous</button>
          <span id="current-date">date</span>
          <button onclick="moveNext()">Next</button>
        </div>
        <div id="calendar" style="height: 800px;"></div>
      </div>

    <script>
  // First, ensure proper initialization
const Calendar = tui.Calendar;
const calendar = new Calendar('#calendar', {
    defaultView: 'week',
    calendars: [  // Define your calendar ID here
        {
            id: 'cal1',
            name: 'Default Calendar'
        }
    ]
});
calendar.setOptions({
  useDetailPopup: true,
  template: {
    popupIsAllday: function () {
      return 'All day?';
    },
    popupStateFree: function () {
      return 'üèùÔ∏è Free';
    },
    popupStateBusy: function () {
      return 'üî• Busy';
    },
    titlePlaceholder: function () {
      return 'Enter title';
    },
    locationPlaceholder: function () {
      return 'Enter location';
    },
    startDatePlaceholder: function () {
      return 'Start date';
    },
    endDatePlaceholder: function () {
      return 'End date';
    },
    popupSave: function () {
      return 'Add Event';
    },
    popupUpdate: function () {
      return 'Update Event';
    },
    popupEdit: function () {
      return 'Modify';
    },
    popupDelete: function () {
      return 'Remove';
    },
    popupDetailTitle: function (data) {
      return 'Detail of ' + data.title;
    },
    popupClose: function() {
      return '<button class="popup-close-btn" onclick="closePopup()">Close</button>';
    },
  }
});

// Add your events
calendar.createEvents([
    {
        id: '1',
        calendarId: 'cal1',
        title: 'Vacaciones',
        body: 'TOAST UI Calendar',
        start: '2025-02-14T10:00:00',
        end: '2025-06-01T11:00:00',
        location: 'Meeting Room A',
        attendees: ['A', 'B', 'C'],
        category: 'time',
        state: 'Free',
        isReadOnly: true,
        color: '#000',  // Changed from white to black
        backgroundColor: '#f0f0f0',  // Lighter background
        customStyle: {
            fontStyle: 'italic',
            fontSize: '15px',
        },
    },
    {
        id: '2',
        calendarId: 'cal1',
        title: 'Vacaciones',
        body: 'TOAST UI Calendar',
        start: '2025-02-14T10:00:00',
        end: '2025-06-01T11:00:00',
        location: 'Meeting Room B',
        attendees: ['A', 'B', 'C'],
        category: 'time',
        state: 'Free',
        isReadOnly: true,
        color: '#000',  // Changed from white to black
        backgroundColor: '#f0f0f0',  // Lighter background
        customStyle: {
            fontStyle: 'italic',
            fontSize: '15px',
        },
    }
]);

// Render the calendar
calendar.render();

function movePrev() {
  calendar.prev();
  updateCurrentDate();
}

function moveNext() {
  calendar.next();
  updateCurrentDate();
}

function closePopup() {
  calendar.closePopup();
}

    </script>
</body>
</html>
